<!doctype html>
<html lang="fr"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Neptune — par CHEDDAD EL AOUNI Mourad</title>
<style>
:root{
  --bg:#0d1b3d;           /* bleu foncé */
  --bg2:#1e3f8a;          /* bleu moyen */
  --panel:#102a5c;        /* panneau */
  --panel2:#163a7e;       /* panneau plus clair */
  --line:#2a4ea8;
  --text:#eef6ff;
  --muted:#bcd1ff;
  --acc:#5aa0ff;
  --ok:#1e6e5a;
  --err:#8b3a3a;
  --warn:#8b7a3a;
  --rad:14px;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:linear-gradient(180deg, var(--bg) 0%, var(--bg2) 60%);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial
}
header{position:sticky;top:0;background:rgba(13,27,61,.9);backdrop-filter:blur(6px);border-bottom:1px solid var(--line);z-index:10}
.head{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:10px 14px}
h1{margin:0;font-size:16px}
.badges{display:flex;gap:8px;align-items:center}
.badge{background:#103074;border:1px solid #2a4fa7;color:#d9e4ff;padding:3px 7px;border-radius:999px;font-size:12px}
nav{display:flex;gap:8px;overflow:auto;padding:8px 14px;border-top:1px solid #0f1b3e;border-bottom:1px solid var(--line);background:rgba(13,27,61,.9)}
nav button{white-space:nowrap;border:1px solid #28407f;color:#e7f0ff;padding:6px 10px;border-radius:999px;font-size:13px;cursor:pointer;background:#0f2558}
nav button.active{background:#1a49ad;color:#fff;border-color:#3a60c7}
.container{max-width:1280px;margin:0 auto;padding:14px}
.card{background:linear-gradient(180deg, var(--panel) 0%, var(--panel2) 100%);border:1px solid var(--line);border-radius:var(--rad);margin:12px 0;overflow:hidden}
.card-h{padding:10px 12px;border-bottom:1px solid var(--line);display:flex;gap:8px;align-items:center;justify-content:space-between}
.card-b{padding:10px 12px}
.grid{display:grid;gap:8px}
.g2{grid-template-columns:repeat(2,1fr)}
.g3{grid-template-columns:repeat(3,1fr)}
.g4{grid-template-columns:repeat(4,1fr)}
@media(max-width:860px){.g2,.g3,.g4{grid-template-columns:1fr}}
label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
input,select,button{font-size:14px}
input[type=text],input[type=number],select{width:100%;padding:9px 10px;border-radius:10px;border:1px solid #22408f;background:#0e2458;color:#eef6ff}
button{border-radius:10px;border:1px solid #2b4fb0;background:#13367a;color:#e7edff;padding:8px 11px;cursor:pointer}
button.ghost{background:transparent;border-style:dashed;color:#cfe0ff}
button.small{font-size:12px;padding:6px 8px}
.table{overflow:auto;border:1px solid var(--line);border-radius:10px}
table{width:100%;border-collapse:separate;border-spacing:0;font-size:13px}
th,td{padding:8px 10px;border-bottom:1px solid var(--line);vertical-align:top}
th{position:sticky;top:0;background:#102d69;text-align:left}
td:first-child,th:first-child{position:sticky;left:0;background:#0e2a62;border-right:1px solid var(--line)}
.segment{margin:4px 0;padding:6px 8px;border:1px solid #2a56b7;border-radius:8px;background:#0f2b6b;position:relative}
.segment .dot{position:absolute;left:6px;top:50%;transform:translateY(-50%);width:10px;height:10px;border-radius:50%;border:1px solid rgba(255,255,255,.6)}
.segment .body{padding-left:18px;display:block}
.small{font-size:12px;color:#cfe0ff}
.muted{color:#b9ccff}
.hidden{display:none}
.sep{height:10px}
.tag{font-size:11px;border:1px solid #2a4fa7;background:#0f2c6e;color:#d9e4ff;border-radius:6px;padding:2px 6px;margin-left:6px}
.tag.err{border-color:#8b3a3a;background:#2b1111;color:#ffd0d0}
.tag.warn{border-color:#8b7a3a;background:#2b2411;color:#ffe7b5}

/* Subtabs */
.subtabs{display:flex;gap:8px;padding:8px 12px;border-bottom:1px dashed var(--line);background:#0e2a62}
.subtabs button{border:1px solid #28407f;color:#cfe0ff;padding:6px 10px;border-radius:999px;font-size:12px;background:transparent;cursor:pointer}
.subtabs button.active{background:#1a49ad;color:#fff;border-color:#3a60c7}

/* Controls */
.controls{display:flex;flex-wrap:wrap;gap:8px;align-items:flex-end}
.controls .item{min-width:180px}

/* Segmented */
.seg{display:flex;border:1px solid #2a4ea8;border-radius:999px;overflow:hidden}
.seg button{border:0;background:transparent;color:#cfe0ff;padding:6px 12px}
.seg button.active{background:#1a49ad;color:#fff}

/* Calendar */
.cal{display:grid;grid-template-columns:repeat(7,1fr);border:1px solid var(--line);border-radius:10px;overflow:hidden}
.cal .hd{background:#0e2a62;border-bottom:1px solid var(--line);padding:6px 8px;font-weight:600}
.cal .cell{min-height:120px;border-right:1px solid var(--line);border-bottom:1px solid var(--line);padding:6px 8px}
.cal .cell:nth-child(7n){border-right:0}
.cal .dt{font-size:12px;color:#cfe0ff;margin-bottom:4px}
.cal .chip{display:inline-block;font-size:11px;border-radius:999px;border:1px solid rgba(255,255,255,.25);padding:1px 6px;margin:2px 4px 0 0}
.cal .chip .sw{display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:6px;border:1px solid rgba(255,255,255,.6)}

.hint{font-size:12px;color:#cfe0ff;opacity:.9}
hr.soft{border:0;border-top:1px dashed var(--line);margin:12px 0}

/* Highlight for chosen replacement */
.rep-choice.selected{outline:2px solid var(--ok); box-shadow: inset 0 0 0 2px rgba(30,110,90,.35);} 
.rep-choice{transition:box-shadow .15s, outline .15s}

/* CSV export disabled */
.csv-export{display:none !important}

/* === Auth overlay === */
#authOverlay{position:fixed;inset:0;background:rgba(13,27,61,.96);backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center;z-index:99999}
#authCard{background:linear-gradient(180deg, var(--panel) 0%, var(--panel2) 100%);border:1px solid var(--line);border-radius:var(--rad);padding:20px;min-width:320px;box-shadow:0 10px 30px rgba(0,0,0,.4)}
#authCard h2{margin:0 0 10px 0;font-size:18px}
#authCard .row{margin:8px 0}
#authErr{color:#ffd0d0;font-size:12px;min-height:16px}

</style>
</head>
<body>

<div id="authOverlay" style="display: none;">
  <form id="authCard">
    <h2>Authentification</h2>
    <div class="row">
      <label>Identifiant</label>
      <input id="authId" type="text" autocomplete="username" placeholder="Identifiant">
    </div>
    <div class="row">
      <label>Code</label>
      <input id="authCode" type="password" autocomplete="current-password" placeholder="Code">
    </div>
    <div id="authErr" class="row">Identifiants incorrects.</div>
    <div class="row">
      <button id="authBtn" type="submit">Entrer</button>
    </div>
  </form>
</div>

<header>
  <div class="head">
    <h1>Neptune — par CHEDDAD EL AOUNI Mourad</h1>
    <div class="badges">
      <span class="badge" id="wkBadge" title="Cliquer pour modifier la semaine/année globale" style="cursor: pointer;">S36 · 2025</span> <span class="badge" id="roleBadge">Rôle: Administrateur</span>
    </div>
  </div>
  <nav id="tabs"><button class="">Accueil</button><button class="">Planning praticien</button><button class="">Planning interne</button><button class="">Calendrier</button><button class="">Absences &amp; Remplacements</button><button class="">Semaine type</button><button class="">Absences</button><button class="">Gardes</button><button class="">Astreinte</button><button class="">Données</button><button class="">Stats</button><button class="active">Sauvegarde</button></nav>
</header>

<div class="container">
  <!-- Accueil -->
  <section id="page-acc" class="hidden">
    <div class="card">
      <div class="card-h">
        <div>Accueil — vue par salle</div>
        <div>
          <button id="btnExportAccueil" class="small ghost" style="display:none">Exporter CSV</button>
        </div>
      </div>
      <div class="card-b">
        <div class="controls">
          <div class="item">
            <label>Vue</label>
            <div class="seg">
              <button id="accModeWeek" class="active">Semaine</button>
            </div>
<span id="accModeMonth" style="display:none" class=""></span>
          </div>
          <div class="item" id="blkYear"><label>Année</label><select id="accYear"><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select></div>
          <div class="item" id="blkWeek"><label>Semaine (ISO)</label><select id="accWeek"><option value="1">S01 · 30/12/2024 → 03/01/2025</option><option value="2">S02 · 06/01/2025 → 10/01/2025</option><option value="3">S03 · 13/01/2025 → 17/01/2025</option><option value="4">S04 · 20/01/2025 → 24/01/2025</option><option value="5">S05 · 27/01/2025 → 31/01/2025</option><option value="6">S06 · 03/02/2025 → 07/02/2025</option><option value="7">S07 · 10/02/2025 → 14/02/2025</option><option value="8">S08 · 17/02/2025 → 21/02/2025</option><option value="9">S09 · 24/02/2025 → 28/02/2025</option><option value="10">S10 · 03/03/2025 → 07/03/2025</option><option value="11">S11 · 10/03/2025 → 14/03/2025</option><option value="12">S12 · 17/03/2025 → 21/03/2025</option><option value="13">S13 · 24/03/2025 → 28/03/2025</option><option value="14">S14 · 31/03/2025 → 04/04/2025</option><option value="15">S15 · 07/04/2025 → 11/04/2025</option><option value="16">S16 · 14/04/2025 → 18/04/2025</option><option value="17">S17 · 21/04/2025 → 25/04/2025</option><option value="18">S18 · 28/04/2025 → 02/05/2025</option><option value="19">S19 · 05/05/2025 → 09/05/2025</option><option value="20">S20 · 12/05/2025 → 16/05/2025</option><option value="21">S21 · 19/05/2025 → 23/05/2025</option><option value="22">S22 · 26/05/2025 → 30/05/2025</option><option value="23">S23 · 02/06/2025 → 06/06/2025</option><option value="24">S24 · 09/06/2025 → 13/06/2025</option><option value="25">S25 · 16/06/2025 → 20/06/2025</option><option value="26">S26 · 23/06/2025 → 27/06/2025</option><option value="27">S27 · 30/06/2025 → 04/07/2025</option><option value="28">S28 · 07/07/2025 → 11/07/2025</option><option value="29">S29 · 14/07/2025 → 18/07/2025</option><option value="30">S30 · 21/07/2025 → 25/07/2025</option><option value="31">S31 · 28/07/2025 → 01/08/2025</option><option value="32">S32 · 04/08/2025 → 08/08/2025</option><option value="33">S33 · 11/08/2025 → 15/08/2025</option><option value="34">S34 · 18/08/2025 → 22/08/2025</option><option value="35">S35 · 25/08/2025 → 29/08/2025</option><option value="36">S36 · 01/09/2025 → 05/09/2025</option><option value="37">S37 · 08/09/2025 → 12/09/2025</option><option value="38">S38 · 15/09/2025 → 19/09/2025</option><option value="39">S39 · 22/09/2025 → 26/09/2025</option><option value="40">S40 · 29/09/2025 → 03/10/2025</option><option value="41">S41 · 06/10/2025 → 10/10/2025</option><option value="42">S42 · 13/10/2025 → 17/10/2025</option><option value="43">S43 · 20/10/2025 → 24/10/2025</option><option value="44">S44 · 27/10/2025 → 31/10/2025</option><option value="45">S45 · 03/11/2025 → 07/11/2025</option><option value="46">S46 · 10/11/2025 → 14/11/2025</option><option value="47">S47 · 17/11/2025 → 21/11/2025</option><option value="48">S48 · 24/11/2025 → 28/11/2025</option><option value="49">S49 · 01/12/2025 → 05/12/2025</option><option value="50">S50 · 08/12/2025 → 12/12/2025</option><option value="51">S51 · 15/12/2025 → 19/12/2025</option><option value="52">S52 · 22/12/2025 → 26/12/2025</option><option value="53">S53 · 29/12/2025 → 02/01/2026</option></select></div>
          <div class="item hidden" id="blkMonth"><label>Mois</label>
            <div class="grid g2">
              <select id="accMonth">
                <option value="0">Janvier</option><option value="1">Février</option><option value="2">Mars</option><option value="3">Avril</option>
                <option value="4">Mai</option><option value="5">Juin</option><option value="6">Juillet</option><option value="7">Août</option>
                <option value="8">Septembre</option><option value="9">Octobre</option><option value="10">Novembre</option><option value="11">Décembre</option>
              </select>
              <select id="accMonthYear"><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select>
            </div>
          </div>
          <div class="item"><label>&nbsp;</label><button id="btnAllRooms">Tout cocher</button> <button id="btnNoneRooms" class="ghost">Tout décocher</button></div>
        </div>

        <div class="controls">
          <div class="item"><label>Filtrer par spécialité</label><div id="fSpecBox" class="grid g3"><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 209, 182);"></span> NRD</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 209, 193);"></span> NRI</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 195, 71);"></span> Ostéo</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 195);"></span> Dig</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 120);"></span> Onco</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(78, 71, 209);"></span> Landerneau</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 76, 209);"></span> Médecine légale</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 81);"></span> CINAPS</label></div></div>
          <div class="item"><label>Filtrer par praticien</label><div id="fPracBox" class="grid g3"><label><input type="checkbox"> AB</label><label><input type="checkbox"> ACR</label><label><input type="checkbox"> AF</label><label><input type="checkbox"> AP</label><label><input type="checkbox"> AS</label><label><input type="checkbox"> BD</label><label><input type="checkbox"> CC</label><label><input type="checkbox"> DBS</label><label><input type="checkbox"> FG</label><label><input type="checkbox"> GC</label><label><input type="checkbox"> JCG</label><label><input type="checkbox"> JLIM</label><label><input type="checkbox"> JO</label><label><input type="checkbox"> JP</label><label><input type="checkbox"> JRR</label><label><input type="checkbox"> KR</label><label><input type="checkbox"> LV</label><label><input type="checkbox"> MC</label><label><input type="checkbox"> MCEA</label><label><input type="checkbox"> MG</label><label><input type="checkbox"> MTAXIL</label><label><input type="checkbox"> NBA</label><label><input type="checkbox"> PLL</label><label><input type="checkbox"> RL</label><label><input type="checkbox"> SR</label><label><input type="checkbox"> TG</label><label><input type="checkbox"> TH</label><label><input type="checkbox"> YD</label></div></div>
        </div>

        <div class="sep"></div>
        <div><label>Salles affichées</label><div id="roomChecks" class="grid g3"><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 136);"></span> IRM 11</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 133);"></span> IRM 12</label></div></div>
        <div class="hint" id="accHint"></div>
      </div>
    </div>
    <div id="accOut"><div class="card"><div class="card-h">IRM 11 — S36</div><div class="card-b"><div class="table"><table data-name="IRM 11 S36"><thead><tr><th>Jour</th><th>Segments</th><th>Actions</th></tr></thead><tbody><tr><td>Lundi 01/09</td><td><div class="segment" style="border-left: 6px solid rgb(71, 209, 182);"><span class="dot" style="background: rgb(71, 209, 182);"></span><span class="body">08:00–16:00 · NRD · MCEA</span><span class="tag err">Chef ABS/repos</span><span class="tag">Remplaçant : Aucun</span></div><div class="segment" style="border-left: 6px solid rgb(71, 209, 182);"><span class="dot" style="background: rgb(71, 209, 182);"></span><span class="body">16:00–20:00 · NRD · JCG</span><span class="tag err">Chef ABS/repos</span><span class="tag">Remplaçant : Aucun</span></div></td><td><div>Remplacer Chef : <button class="ghost rep-choice" title="Réinitialiser le remplacement">Aucun remplaçant</button> <button class="ghost rep-choice" title="Libre sur ce créneau">AP · 0</button> <button class="ghost rep-choice" title="Libre sur ce créneau">AS · 0</button> <button class="ghost rep-choice selected" title="Libre sur ce créneau">BD · 0</button> <button class="ghost rep-choice" title="Libre sur ce créneau">CC · 0</button> <button class="ghost rep-choice" title="Libre sur ce créneau">DBS · 0</button> <button class="ghost rep-choice" title="Libre sur ce créneau">GC · 0</button> </div><div>Remplacer Chef : <button class="ghost rep-choice selected" title="Réinitialiser le remplacement">Aucun remplaçant</button> <button class="ghost rep-choice" title="Libre sur ce créneau">AP · 0</button> <button class="ghost rep-choice" title="Libre sur ce créneau">AS · 0</button> <button class="ghost rep-choice" title="Libre sur ce créneau">BD · 0</button> <button class="ghost rep-choice" title="Libre sur ce créneau">CC · 0</button> <button class="ghost rep-choice" title="Libre sur ce créneau">DBS · 0</button> <button class="ghost rep-choice" title="Libre sur ce créneau">GC · 0</button> </div></td></tr><tr><td>Mardi 02/09</td><td><span class="muted">—</span></td><td></td></tr><tr><td>Mercredi 03/09</td><td><span class="muted">—</span></td><td></td></tr><tr><td>Jeudi 04/09</td><td><span class="muted">—</span></td><td></td></tr><tr><td>Vendredi 05/09</td><td><span class="muted">—</span></td><td></td></tr></tbody></table></div></div></div><div class="card"><div class="card-h">IRM 12 — S36</div><div class="card-b"><div class="table"><table data-name="IRM 12 S36"><thead><tr><th>Jour</th><th>Segments</th><th>Actions</th></tr></thead><tbody><tr><td>Lundi 01/09</td><td><span class="muted">—</span></td><td></td></tr><tr><td>Mardi 02/09</td><td><span class="muted">—</span></td><td></td></tr><tr><td>Mercredi 03/09</td><td><span class="muted">—</span></td><td></td></tr><tr><td>Jeudi 04/09</td><td><span class="muted">—</span></td><td></td></tr><tr><td>Vendredi 05/09</td><td><span class="muted">—</span></td><td></td></tr></tbody></table></div></div></div></div>
    <div class="card"><div class="card-h"><div>CINAPS — praticiens présents S+1</div></div><div class="card-b" id="cinapsOut">—</div></div>
  </section>

  <!-- Calendrier -->
  <section id="page-cal" class="hidden">
    <div class="card">
      <div class="card-h">
        <div>Calendrier — Présences / Absences (au choix)</div>
      </div>
      <div class="card-b">
                <div class="controls">
          <div class="item"><label>Mois</label>
            <div class="grid g2">
              <select id="calMonth">
                <option value="0">Janvier</option><option value="1">Février</option><option value="2">Mars</option><option value="3">Avril</option>
                <option value="4">Mai</option><option value="5">Juin</option><option value="6">Juillet</option><option value="7">Août</option>
                <option value="8">Septembre</option><option value="9">Octobre</option><option value="10">Novembre</option><option value="11">Décembre</option>
              </select>
              <select id="calYear"><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select>
            </div>
          </div>
          <div class="item"><label>Affichage</label>
            <div class="seg">
              <button id="calModePresence" class="active">Présences</button>
              <button id="calModeAbsence">Absences</button>
            </div>
          </div>
          <div class="item"><label>Population</label>
            <div class="seg">
              <button id="calWhoPrac" class="active">Praticiens</button>
              <button id="calWhoIntern">Internes</button>
              <button id="calWhoBoth">Les deux</button>
            </div>
          </div>
    
          <div class="item"><label>Inclure salles</label><div id="calRoomChecks" class="grid g3"><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 193, 71);"></span> IRM salle 11</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 195, 71);"></span> IRM salle 12</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 76);"></span> IRM urg</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(117, 71, 209);"></span> Scanner 6</label></div></div>
          <div class="item"><label>Filtre spécialité</label><div id="calSpecBox" class="grid g3"><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 209, 182);"></span> NRD</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 209, 193);"></span> NRI</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 195, 71);"></span> Ostéo</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 195);"></span> Dig</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 120);"></span> Onco</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(78, 71, 209);"></span> Landerneau</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 76, 209);"></span> Médecine légale</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 81);"></span> CINAPS</label></div></div>
          <div class="item"><label>Filtre praticien</label><div id="calPracBox" class="grid g3"><label><input type="checkbox"> MCEA</label><label><input type="checkbox"> DBS</label></div></div>
          <div class="item"><label>Filtre interne</label><div id="calIntBox" class="grid g3"><label><input type="checkbox"> Dupont I.</label></div></div>
        </div>
        <div id="calOut"><div class="cal"><div class="hd">Lun</div><div class="hd">Mar</div><div class="hd">Mer</div><div class="hd">Jeu</div><div class="hd">Ven</div><div class="hd">Sam</div><div class="hd">Dim</div><div class="cell"><div class="dt">28/08</div></div><div class="cell"><div class="dt">29/08</div></div><div class="cell"><div class="dt">30/08</div></div><div class="cell"><div class="dt">31/08</div></div><div class="cell"><div class="dt">01/08</div></div><div class="cell"><div class="dt">02/08</div></div><div class="cell"><div class="dt">03/08</div></div><div class="cell"><div class="dt">04/08</div></div><div class="cell"><div class="dt">05/08</div></div><div class="cell"><div class="dt">06/08</div></div><div class="cell"><div class="dt">07/08</div></div><div class="cell"><div class="dt">08/08</div></div><div class="cell"><div class="dt">09/08</div></div><div class="cell"><div class="dt">10/08</div></div><div class="cell"><div class="dt">11/08</div></div><div class="cell"><div class="dt">12/08</div></div><div class="cell"><div class="dt">13/08</div></div><div class="cell"><div class="dt">14/08</div></div><div class="cell"><div class="dt">15/08</div></div><div class="cell"><div class="dt">16/08</div></div><div class="cell"><div class="dt">17/08</div></div><div class="cell"><div class="dt">18/08</div></div><div class="cell"><div class="dt">19/08</div></div><div class="cell"><div class="dt">20/08</div></div><div class="cell"><div class="dt">21/08</div></div><div class="cell"><div class="dt">22/08</div></div><div class="cell"><div class="dt">23/08</div></div><div class="cell"><div class="dt">24/08</div></div><div class="cell"><div class="dt">25/08</div></div><div class="cell"><div class="dt">26/08</div></div><div class="cell"><div class="dt">27/08</div></div><div class="cell"><div class="dt">28/08</div></div><div class="cell"><div class="dt">29/08</div></div><div class="cell"><div class="dt">30/08</div></div><div class="cell"><div class="dt">31/08</div></div></div></div>
    </div>
  </div></section>

  
  
  <!-- Planning praticien -->
  <section id="page-prac" class="hidden">
    <div class="card">
      <div class="card-h">
        <div>Planning par praticien — <span id="ppRange">01/09/2025 → 05/09/2025</span></div>
      </div>
      <div class="card-b">
        <div class="controls">
          <div class="item"><label>Année</label><select id="ppYear"><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select></div>
          <div class="item"><label>Semaine (ISO)</label><input id="ppWeek" type="number" min="1" max="53" value="36" style="width:120px"></div>
          <div class="item"><label>Praticien</label><select id="ppPrac"><option value="MCEA">MCEA</option><option value="DBS">DBS</option></select></div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-h"><div>Vue hebdomadaire</div></div>
      <div class="card-b"><div id="ppOut" class="table"><div class="table"><table data-name="Planning MCEA S36"><thead><tr><th>Jour</th><th>Segments</th></tr></thead><tbody><tr><td>Lundi 01/09</td><td><span class="muted">—</span></td></tr><tr><td>Mardi 02/09</td><td><span class="muted">—</span></td></tr><tr><td>Mercredi 03/09</td><td><span class="muted">—</span></td></tr><tr><td>Jeudi 04/09</td><td><span class="muted">—</span></td></tr><tr><td>Vendredi 05/09</td><td><span class="muted">—</span></td></tr></tbody></table></div></div></div>
    </div>

    <div class="card">
      <div class="card-h"><div>Gardes &amp; Astreintes — synthèse</div></div>
      <div class="card-b"><div id="ppGA" class="table"><div class="table"><table><thead><tr><th>Type</th><th>Lun</th><th>Mar</th><th>Mer</th><th>Jeu</th><th>Ven</th><th>Sam</th><th>Dim</th></tr></thead><tbody><tr><td>Garde</td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td></tr><tr><td>Astreinte RI</td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td></tr><tr><td>Astreinte NRI</td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td></tr></tbody></table></div></div></div>
    </div>
  </section>
  <!-- Planning interne -->
  <section id="page-intern" class="hidden">
    <div class="card">
      <div class="card-h">
        <div>Planning par interne — <span id="piRange">01/09/2025 → 05/09/2025</span></div>
      </div>
      <div class="card-b">
        <div class="controls">
          <div class="item"><label>Année</label><select id="piYear"><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select></div>
          <div class="item"><label>Semaine (ISO)</label><input id="piWeek" type="number" min="1" max="53" value="36" style="width:120px"></div>
          <div class="item"><label>Interne</label><select id="piIntern"><option value="Dupont I.">Dupont I.</option></select></div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-h"><div>Vue hebdomadaire</div></div>
      <div class="card-b"><div id="piOut" class="table"><div class="table"><table data-name="Planning Dupont I. S36"><thead><tr><th>Jour</th><th>Segments</th></tr></thead><tbody><tr><td>Lundi 01/09</td><td><span class="muted">—</span></td></tr><tr><td>Mardi 02/09</td><td><span class="muted">—</span></td></tr><tr><td>Mercredi 03/09</td><td><span class="muted">—</span></td></tr><tr><td>Jeudi 04/09</td><td><span class="muted">—</span></td></tr><tr><td>Vendredi 05/09</td><td><span class="muted">—</span></td></tr></tbody></table></div></div></div>
    </div>

    <div class="card">
      <div class="card-h"><div>Gardes — synthèse</div></div>
      <div class="card-b"><div id="piGA" class="table"><div class="table"><table><thead><tr><th>Type</th><th>Lun</th><th>Mar</th><th>Mer</th><th>Jeu</th><th>Ven</th><th>Sam</th><th>Dim</th></tr></thead><tbody><tr><td>Garde</td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td><td><span>—</span></td></tr></tbody></table></div></div></div>
    </div>
  </section>



  <!-- Absences & Remplacements -->
  <section id="page-absrep" class="hidden">
    <div class="card">
      <div class="card-h">
        <div>Absences &amp; Remplacements — <span id="absrepRange">S36 · 2025</span></div>
        <div>
          <button id="btnExportAbsRep" class="small ghost" style="display:none">Exporter CSV</button>
        </div>
      </div>
      <div class="card-b">
        <div class="controls">
          <div class="item"><label>Année</label><select id="absrepYear"><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select></div>
          <div class="item"><label>Semaine (ISO)</label><input id="absrepWeek" type="number" min="1" max="53" value="36" style="width:120px"></div>
          <div class="item"><label>Qui afficher</label>
            <div class="seg">
              <button id="absrepWhoBoth" class="active">Les deux</button>
              <button id="absrepWhoPrac">Praticiens</button>
              <button id="absrepWhoIntern">Internes</button>
            </div>
          </div>
          <div class="item"><label>Filtrer par spécialité</label><div id="absrepSpecBox" class="grid g3"><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 209, 182);"></span> NRD</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 209, 193);"></span> NRI</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 195, 71);"></span> Ostéo</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 195);"></span> Dig</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 120);"></span> Onco</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(78, 71, 209);"></span> Landerneau</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 76, 209);"></span> Médecine légale</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 81);"></span> CINAPS</label></div></div>
          <div class="item"><label>Limiter aux salles</label><div id="absrepRoomChecks" class="grid g3"><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 136);"></span> IRM 11</label><label><input type="checkbox"><span class="chipDot" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 133);"></span> IRM 12</label></div></div>
        </div>
        <div id="absrepOut" class="table"><div class="table"><table><thead><tr><th>Jour</th><th>Heure</th><th>Salle</th><th>Spécialité</th><th>Chef</th><th>Interne</th><th>Actions</th></tr></thead><tbody><tr><td colspan="7">Aucune absence sur la sélection.</td></tr></tbody></table></div></div>
      </div>
    </div>
  </section>


  <!-- Semaine type -->
  <section id="page-week" class="hidden">
    <div class="card"><div class="card-h"><div>Semaine type (ajout par ligne)</div></div>
      <div class="card-b">
        <div class="grid g3">
          <div><label>Salle</label><select id="wtRoom"><option value="0">IRM 11</option><option value="1">IRM 12</option></select></div>
          <div><label>Jour</label><select id="wtDay"><option value="0">Lundi</option><option value="1">Mardi</option><option value="2">Mercredi</option><option value="3">Jeudi</option><option value="4">Vendredi</option></select></div>
          <div class="small">Ajoutez des lignes pour remplir la grille</div>
        </div>
        <div class="sep"></div>
        <div class="grid g4">
          <div><label>Spécialité</label><select id="fSpec"><option value="NRD">NRD</option><option value="NRI">NRI</option><option value="Ostéo">Ostéo</option><option value="Dig">Dig</option><option value="Onco">Onco</option><option value="Landerneau">Landerneau</option><option value="Médecine légale">Médecine légale</option><option value="CINAPS">CINAPS</option></select></div>
          <div><label>Chef (praticien)</label><select id="fPrac"><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select></div>
          <div><label>Interne</label><select id="fIntern"><option value="">—</option></select></div>
          <div><label>Début</label><select id="fStart"><option value="0">08:00</option><option value="1">09:00</option><option value="2">10:00</option><option value="3">11:00</option><option value="4">12:00</option><option value="5">13:00</option><option value="6">14:00</option><option value="7">15:00</option><option value="8">16:00</option><option value="9">17:00</option><option value="10">18:00</option><option value="11">19:00</option></select></div>
          <div><label>Fin</label><select id="fEnd"><option value="1">09:00</option><option value="2">10:00</option><option value="3">11:00</option><option value="4">12:00</option><option value="5">13:00</option><option value="6">14:00</option><option value="7">15:00</option><option value="8">16:00</option><option value="9">17:00</option><option value="10">18:00</option><option value="11">19:00</option><option value="12">20:00</option></select></div>
          <div><label>&nbsp;</label><button id="fAdd">Ajouter la ligne</button></div>
        </div>
        <div class="small" id="specRoomHint">Toutes spécialités autorisées (aucune restriction pour cette salle).</div>
        <div class="sep"></div>
        <div id="wtGrid" class="table"><div class="table"><table><thead><tr><th>Créneau</th><th>Spécialité</th><th>Chef</th><th>Interne</th><th>Action</th></tr></thead><tbody><tr><td>08:00–09:00</td><td style="border-left: 6px solid rgb(71, 209, 182);">NRD</td><td>MCEA</td><td>—</td><td><button class="ghost">Vider</button></td></tr><tr><td>09:00–10:00</td><td style="border-left: 6px solid rgb(71, 209, 182);">NRD</td><td>MCEA</td><td>—</td><td><button class="ghost">Vider</button></td></tr><tr><td>10:00–11:00</td><td style="border-left: 6px solid rgb(71, 209, 182);">NRD</td><td>MCEA</td><td>—</td><td><button class="ghost">Vider</button></td></tr><tr><td>11:00–12:00</td><td style="border-left: 6px solid rgb(71, 209, 182);">NRD</td><td>MCEA</td><td>—</td><td><button class="ghost">Vider</button></td></tr><tr><td>12:00–13:00</td><td style="border-left: 6px solid rgb(71, 209, 182);">NRD</td><td>MCEA</td><td>—</td><td><button class="ghost">Vider</button></td></tr><tr><td>13:00–14:00</td><td style="border-left: 6px solid rgb(71, 209, 182);">NRD</td><td>MCEA</td><td>—</td><td><button class="ghost">Vider</button></td></tr><tr><td>14:00–15:00</td><td style="border-left: 6px solid rgb(71, 209, 182);">NRD</td><td>MCEA</td><td>—</td><td><button class="ghost">Vider</button></td></tr><tr><td>15:00–16:00</td><td style="border-left: 6px solid rgb(71, 209, 182);">NRD</td><td>MCEA</td><td>—</td><td><button class="ghost">Vider</button></td></tr><tr><td>16:00–17:00</td><td style="border-left: 6px solid rgb(71, 209, 182);">NRD</td><td>MCEA</td><td>—</td><td><button class="ghost">Vider</button></td></tr><tr><td>17:00–18:00</td><td>—</td><td>—</td><td>—</td><td><button class="ghost">Vider</button></td></tr><tr><td>18:00–19:00</td><td>—</td><td>—</td><td>—</td><td><button class="ghost">Vider</button></td></tr><tr><td>19:00–20:00</td><td>—</td><td>—</td><td>—</td><td><button class="ghost">Vider</button></td></tr></tbody></table></div></div>
      </div>
    </div>
  </section>

  <!-- Absences -->
  <section id="page-abs" class="hidden">
    <div class="card">
      <div class="card-h">
        <div>Absences praticiens — <span id="absRange">S36 · 01/09 → 05/09 / 2025</span></div>
        <div><button id="btnExportAbsP" class="small ghost" style="display:none">Exporter CSV</button></div>
      </div>
      <div class="card-b">
        <div class="controls">
          <div class="item"><label>Année</label><select id="absYear"><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select></div>
          <div class="item"><label>Semaine (ISO)</label><input id="absWeek" type="number" min="1" max="53" value="36" style="width:120px"></div>
        </div>
        <div id="absTable" class="table"><table data-name="Absences Praticiens S36"><thead><tr><th>Praticien</th><th>Lundi 01/09</th><th>Mardi 02/09</th><th>Mercredi 03/09</th><th>Jeudi 04/09</th><th>Vendredi 05/09</th></tr></thead><tbody><tr><td>AB</td><td><button style="background: rgb(53, 26, 26); color: rgb(255, 222, 222); border: 1px solid rgb(109, 50, 50);">ABS</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>ACR</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>AF</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>AP</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>AS</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>BD</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>CC</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>DBS</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>FG</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>GC</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>JCG</td><td><button style="background: rgb(53, 26, 26); color: rgb(255, 222, 222); border: 1px solid rgb(109, 50, 50);">ABS</button></td><td><button style="background: rgb(53, 26, 26); color: rgb(255, 222, 222); border: 1px solid rgb(109, 50, 50);">ABS</button></td><td><button style="background: rgb(53, 26, 26); color: rgb(255, 222, 222); border: 1px solid rgb(109, 50, 50);">ABS</button></td><td><button style="background: rgb(53, 26, 26); color: rgb(255, 222, 222); border: 1px solid rgb(109, 50, 50);">ABS</button></td><td><button style="background: rgb(53, 26, 26); color: rgb(255, 222, 222); border: 1px solid rgb(109, 50, 50);">ABS</button></td></tr><tr><td>JLIM</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>JO</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>JP</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>JRR</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>KR</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>LV</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>MC</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>MCEA</td><td><button style="background: rgb(53, 26, 26); color: rgb(255, 222, 222); border: 1px solid rgb(109, 50, 50);">ABS</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>MG</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>MTAXIL</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>NBA</td><td><button style="background: rgb(53, 26, 26); color: rgb(255, 222, 222); border: 1px solid rgb(109, 50, 50);">ABS</button></td><td><button style="background: rgb(53, 26, 26); color: rgb(255, 222, 222); border: 1px solid rgb(109, 50, 50);">ABS</button></td><td><button style="background: rgb(53, 26, 26); color: rgb(255, 222, 222); border: 1px solid rgb(109, 50, 50);">ABS</button></td><td><button style="background: rgb(53, 26, 26); color: rgb(255, 222, 222); border: 1px solid rgb(109, 50, 50);">ABS</button></td><td><button style="background: rgb(53, 26, 26); color: rgb(255, 222, 222); border: 1px solid rgb(109, 50, 50);">ABS</button></td></tr><tr><td>PLL</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>RL</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>SR</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>TG</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>TH</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr><tr><td>YD</td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td><td><button>Présent</button></td></tr></tbody></table></div>
      </div>
    </div>
    <div class="card">
      <div class="card-h">
        <div>Absences internes — <span id="absIRange">S36 · 01/09 → 05/09 / 2025</span></div>
        <div><button id="btnExportAbsI" class="small ghost" style="display:none">Exporter CSV</button></div>
      </div>
      <div class="card-b">
        <div class="controls">
          <div class="item"><label>Année</label><select id="absIYear"><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select></div>
          <div class="item"><label>Semaine (ISO)</label><input id="absIWeek" type="number" min="1" max="53" value="36" style="width:120px"></div>
        </div>
        <div id="absITable" class="table"><table data-name="Absences Internes S36"><thead><tr><th>Interne</th><th>Lundi 01/09</th><th>Mardi 02/09</th><th>Mercredi 03/09</th><th>Jeudi 04/09</th><th>Vendredi 05/09</th></tr></thead><tbody></tbody></table></div>
      </div>
    </div>
  </section>

  <!-- Gardes -->
  <section id="page-guard" class="hidden">
    <div class="card">
      <div class="card-h">
        <div>Gardes praticiens (lun→dim) — repos = lendemain uniquement — <span id="gdRange">S36 · 01/09 → 07/09 / 2025</span></div>
        <div><button id="btnExportGdP" class="small ghost" style="display:none">Exporter CSV</button></div>
      </div>
      <div class="card-b">
        <div class="controls">
          <div class="item"><label>Année</label><select id="gdYear"><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select></div>
          <div class="item"><label>Semaine (ISO)</label><input id="gdWeek" type="number" min="1" max="53" value="36" style="width:120px"></div>
        </div>
        <div id="gdTable" class="table"><table data-name="Gardes Praticiens S36"><thead><tr><th>Jour</th><th>Praticien de garde</th></tr></thead><tbody><tr><td>Lundi 01/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Mardi 02/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Mercredi 03/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Jeudi 04/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Vendredi 05/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Samedi 06/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Dimanche 07/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr></tbody></table></div>
      </div>
    </div>
    <div class="card">
      <div class="card-h">
        <div>Gardes internes (lun→dim) — repos = lendemain uniquement — <span id="gdIRange">S36 · 01/09 → 07/09 / 2025</span></div>
        <div><button id="btnExportGdI" class="small ghost" style="display:none">Exporter CSV</button></div>
      </div>
      <div class="card-b">
        <div class="controls">
          <div class="item"><label>Année</label><select id="gdIYear"><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select></div>
          <div class="item"><label>Semaine (ISO)</label><input id="gdIWeek" type="number" min="1" max="53" value="36" style="width:120px"></div>
        </div>
        <div id="gdITable" class="table"><table data-name="Gardes Internes S36"><thead><tr><th>Jour</th><th>Interne de garde</th></tr></thead><tbody><tr><td>Lundi 01/09</td><td><select><option value="">—</option></select><span class="tag warn" style="margin-left: 8px; display: none;">INTERNE ABSENT</span></td></tr><tr><td>Mardi 02/09</td><td><select><option value="">—</option></select><span class="tag warn" style="margin-left: 8px; display: none;">INTERNE ABSENT</span></td></tr><tr><td>Mercredi 03/09</td><td><select><option value="">—</option></select><span class="tag warn" style="margin-left: 8px; display: none;">INTERNE ABSENT</span></td></tr><tr><td>Jeudi 04/09</td><td><select><option value="">—</option></select><span class="tag warn" style="margin-left: 8px; display: none;">INTERNE ABSENT</span></td></tr><tr><td>Vendredi 05/09</td><td><select><option value="">—</option></select><span class="tag warn" style="margin-left: 8px; display: none;">INTERNE ABSENT</span></td></tr><tr><td>Samedi 06/09</td><td><select><option value="">—</option></select><span class="tag warn" style="margin-left: 8px; display: none;">INTERNE ABSENT</span></td></tr><tr><td>Dimanche 07/09</td><td><select><option value="">—</option></select><span class="tag warn" style="margin-left: 8px; display: none;">INTERNE ABSENT</span></td></tr></tbody></table></div>
      </div>
    </div>
  
  </section>

<!-- Astreinte -->
<section id="page-oncall" class="hidden">
  <div class="card">
    <div class="card-h">
      <div>Astreinte NRI (lun→dim) — pas de repos associé — <span id="ocRangeNRI">S36 · 01/09 → 07/09 / 2025</span></div>
      <div><button id="btnExportOcNRI" class="small ghost" style="display:none">Exporter CSV</button></div>
    </div>
    <div class="card-b">
      <div class="controls">
        <div class="item"><label>Année</label><select id="ocYear"><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select></div>
        <div class="item"><label>Semaine (ISO)</label><input id="ocWeek" type="number" min="1" max="53" value="36" style="width:120px"></div>
      </div>
      <div id="ocTableNRI" class="table"><div class="table"><table data-name="Astreinte NRI S36"><thead><tr><th>Jour</th><th>Praticien d'astreinte</th></tr></thead><tbody><tr><td>Lundi 01/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Mardi 02/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Mercredi 03/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Jeudi 04/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Vendredi 05/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Samedi 06/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Dimanche 07/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr></tbody></table></div></div>
      <div class="hint">Seuls les praticiens avec la spécialité <b>NRI</b> sont proposés. S'il n'y en a pas dans les données, toute la liste est affichée.</div>
    </div>
  </div>

  <div class="card">
    <div class="card-h">
      <div>Astreinte RI (lun→dim) — pas de repos associé — <span id="ocRangeRI">S36 · 01/09 → 07/09 / 2025</span></div>
      <div><button id="btnExportOcRI" class="small ghost" style="display:none">Exporter CSV</button></div>
    </div>
    <div class="card-b">
      <div id="ocTableRI" class="table"><div class="table"><table data-name="Astreinte RI S36"><thead><tr><th>Jour</th><th>Praticien d'astreinte</th></tr></thead><tbody><tr><td>Lundi 01/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Mardi 02/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Mercredi 03/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Jeudi 04/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Vendredi 05/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Samedi 06/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr><tr><td>Dimanche 07/09</td><td><select><option value="">—</option><option value="AB">AB</option><option value="ACR">ACR</option><option value="AF">AF</option><option value="AP">AP</option><option value="AS">AS</option><option value="BD">BD</option><option value="CC">CC</option><option value="DBS">DBS</option><option value="FG">FG</option><option value="GC">GC</option><option value="JCG">JCG</option><option value="JLIM">JLIM</option><option value="JO">JO</option><option value="JP">JP</option><option value="JRR">JRR</option><option value="KR">KR</option><option value="LV">LV</option><option value="MC">MC</option><option value="MCEA">MCEA</option><option value="MG">MG</option><option value="MTAXIL">MTAXIL</option><option value="NBA">NBA</option><option value="PLL">PLL</option><option value="RL">RL</option><option value="SR">SR</option><option value="TG">TG</option><option value="TH">TH</option><option value="YD">YD</option></select><span class="tag err" style="margin-left: 8px; display: none;">ABSENT ce jour</span></td></tr></tbody></table></div></div>
      <div class="hint">Seuls les praticiens avec la spécialité <b>RI</b> sont proposés. S'il n'y en a pas dans les données, toute la liste est affichée.</div>
    </div>
  </div>
</section>

<!-- Données -->

  <section id="page-data" class="hidden">
    <div class="card">
      <div class="card-h"><div>Données</div></div>
      <div class="subtabs" id="dataSubtabs"><button class="active">Praticiens</button><button class="">Internes</button><button class="">Salles</button><button class="">Spécialités</button></div>
      <div class="card-b">
        <section id="data-prats" class=""><div class="card-b"><div id="prList"><div class="card"><div class="card-h">AB</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">ACR</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">AF</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">AP</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">AS</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">BD</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">CC</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">DBS</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">FG</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">GC</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">JCG</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">JLIM</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">JO</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">JP</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">JRR</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">KR</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">LV</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">MC</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">MCEA</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">MG</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">MTAXIL</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">NBA</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">PLL</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">RL</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">SR</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">TG</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">TH</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">YD</div><div class="card-b"><label><input type="checkbox"> CINAPS</label><div></div><div>Spécialités :</div><label><input type="checkbox"> NRD</label><label><input type="checkbox"> NRI</label><label><input type="checkbox"> Ostéo</label><label><input type="checkbox"> Dig</label><label><input type="checkbox"> Onco</label><label><input type="checkbox"> Landerneau</label><label><input type="checkbox"> Médecine légale</label><label><input type="checkbox"> CINAPS</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div></div></div><div class="card-b"><input id="prNew" type="text" placeholder="Nom (ex: MCEA)"> <button id="prAdd">Ajouter</button></div></section>
        <section id="data-interns" class="hidden"></section>
        <section id="data-rooms" class="hidden"><div class="card-b"><div id="rmList"><div class="card"><div class="card-h">IRM 11</div><div class="card-b"><div>Spécialités autorisées :</div><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 209, 182);"></span> NRD</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 209, 193);"></span> NRI</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 195, 71);"></span> Ostéo</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 195);"></span> Dig</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 120);"></span> Onco</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(78, 71, 209);"></span> Landerneau</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 76, 209);"></span> Médecine légale</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 81);"></span> CINAPS</label><div></div><label><input type="checkbox"> Remplaçable par Téléradiologie</label><label><input type="checkbox"> Remplaçable par CINAPS (NRD)</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div><div class="card"><div class="card-h">IRM 12</div><div class="card-b"><div>Spécialités autorisées :</div><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 209, 182);"></span> NRD</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 209, 193);"></span> NRI</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 195, 71);"></span> Ostéo</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 195);"></span> Dig</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 120);"></span> Onco</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(78, 71, 209);"></span> Landerneau</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(71, 76, 209);"></span> Médecine légale</label><label><input type="checkbox"><span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0px 6px; border: 1px solid rgba(255, 255, 255, 0.6); background: rgb(209, 71, 81);"></span> CINAPS</label><div></div><label><input type="checkbox"> Remplaçable par Téléradiologie</label><label><input type="checkbox"> Remplaçable par CINAPS (NRD)</label><div></div><button class="ghost">Renommer</button> <button class="ghost">Supprimer</button></div></div></div></div><div class="card-b"><input id="rmNew" type="text" placeholder="ex: IRM salle 13"> <button id="rmAdd">Ajouter</button></div></section>
        <section id="data-specs" class="hidden"></section>
      </div>
    </div>
  </section>

  <!-- Stats -->
  <section id="page-stats" class="hidden">
    <div class="card">
      <div class="card-h">
        <div>Stats praticiens — semaine</div>
        <div><button id="btnExportStP" class="small ghost" style="display:none">Exporter CSV</button></div>
      </div>
      <div class="card-b"><div class="controls"><div class="item"><label>Semaine</label><input id="stWeek" type="number" min="1" max="53" value="36" style="width:120px"></div></div><div id="stTable" class="table"><table data-name="Stats Praticiens S36"><thead><tr><th>Praticien</th><th>Lun</th><th>Mar</th><th>Mer</th><th>Jeu</th><th>Ven</th><th>Total</th></tr></thead><tbody><tr><td>AB</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>ACR</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>AF</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>AP</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>AS</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>4</td></tr><tr><td>BD</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>CC</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>DBS</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>FG</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>GC</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>JCG</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>JLIM</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>JO</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>JP</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>JRR</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>KR</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>LV</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>MC</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>MCEA</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>MG</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>MTAXIL</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>NBA</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>PLL</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>RL</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>SR</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>TG</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>TH</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>YD</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></tbody></table></div></div>
    </div>

    <div class="card">
      <div class="card-h">
        <div>Stats internes — semaine</div>
        <div><button id="btnExportStI" class="small ghost" style="display:none">Exporter CSV</button></div>
      </div>
      <div class="card-b"><div class="controls"><div class="item"><label>Semaine</label><input id="stIWeek" type="number" min="1" max="53" value="36" style="width:120px"></div></div><div id="stITable" class="table"><table data-name="Stats Internes S36"><thead><tr><th>Interne</th><th>Lun</th><th>Mar</th><th>Mer</th><th>Jeu</th><th>Ven</th><th>Total</th></tr></thead><tbody></tbody></table></div></div>
    </div>

    <div class="card">
      <div class="card-h">
        <div>Stats avancées — Jour / Semaine / Mois — détail par salle</div>
        <div><button id="btnExportStAdv" class="small ghost" style="display:none">Exporter CSV</button></div>
      </div>
      <div class="card-b">
        <div class="controls">
          <div class="item"><label>Vue</label>
            <select id="stMode">
              <option value="week">Semaine</option>
              <option value="day">Jour</option>
              <option value="month">Mois</option>
            </select>
          </div>
          <div class="item" id="ctlWeek"><label>Semaine (ISO)</label><input id="stAdvWeek" type="number" min="1" max="53" value="36"></div>
          <div class="item hidden" id="ctlDay">
            <label>Jour (lun→ven)</label>
            <select id="stAdvDay">
              <option value="0">Lundi</option>
              <option value="1">Mardi</option>
              <option value="2">Mercredi</option>
              <option value="3">Jeudi</option>
              <option value="4">Vendredi</option>
            </select>
          </div>
          <div class="item hidden" id="ctlMonth">
            <label>Mois</label>
            <div class="grid g2">
              <select id="stAdvMonth">
                <option value="0">Janvier</option><option value="1">Février</option><option value="2">Mars</option><option value="3">Avril</option>
                <option value="4">Mai</option><option value="5">Juin</option><option value="6">Juillet</option><option value="7">Août</option>
                <option value="8">Septembre</option><option value="9">Octobre</option><option value="10">Novembre</option><option value="11">Décembre</option>
              </select>
              <select id="stAdvYear"><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select>
            </div>
          </div>
          <div class="item"><label>Regrouper par</label>
            <select id="stGroup">
              <option value="prac">Praticien</option>
              <option value="spec">Spécialité</option>
            </select>
          </div>
          <div class="item"><label>&nbsp;</label><button id="stRefresh">Actualiser</button></div>
        </div>
        <hr class="soft">
        <div id="stAdvOut" class="table"><div class="table"><table><thead><tr><th>Groupe</th><th>IRM 11</th><th>IRM 12</th><th>Total</th></tr></thead><tbody><tr><td>AS</td><td>4 h</td><td>0 h</td><td>4 h</td></tr></tbody></table></div></div>
      </div>
    </div>
  </section>

  <!-- Sauvegarde -->
  <section id="page-save" class="">
    <div class="card"><div class="card-h"><div>Sauvegarde</div></div>
      <div class="card-b"><button id="btnExport" class="ghost">Exporter JSON</button>
        <input id="fileImport" type="file" accept="application/json">
        <button id="btnImport">Importer JSON</button>
        <button id="btnReset" class="ghost" style="margin-left:10px">Réinitialiser</button>
        <hr class="soft">
        <div class="small">Enregistrer <b>directement dans ce fichier HTML</b> (nécessite Chrome/Edge récents).</div>
        <div class="controls">
          <button id="btnPickHtml">Choisir ce fichier pour l'autosauvegarde</button>
          <button id="btnSaveHtmlNow" class="ghost">Enregistrer maintenant</button>
        </div>
        <div class="hint" id="saveHint">Autosauvegarde activée sur ce fichier.</div></div>
    </div>
  
    <!-- Neptune: bloc de sauvegarde centralisée (JsonStorage) -->
    <div class="card" id="simpleSaveWrap">
      <div class="card-h"><div>Sauvegarde centralisée (JsonStorage)</div></div>
      <div class="card-b">
        <div class="controls">
          <button id="btnSimplePull" type="button" class="ghost">← Recharger</button>
          <button id="btnSimplePush" type="button">Pousser →</button>
          <span class="small" style="margin-left:10px">Autosync 5 min</span>
        </div>
        <div class="hint" id="simpleSaveStatus">—</div>
      </div>
    </div>

  </section>
</div>


<script>
    // Ensure specFlags exists; default NRD->cinaps true for backward compatibility
    try{
      if(!data.specFlags) data.specFlags = {};
      if(Array.isArray(data.specialties)){
        for(var _i=0; _i<data.specialties.length; _i++){
          var _s=data.specialties[_i];
          if(!data.specFlags[_s]) data.specFlags[_s] = {tele:false, cinaps:false};
        }
      }
      if(data.specialties && data.specialties.indexOf('NRD')!==-1){
        data.specFlags['NRD'].cinaps = !!data.specFlags['NRD'].cinaps || true;
      }
    }catch(e){}
</script>
<script>
// --- Correctif : refreshActivePage non récursif (synchronise bien l'Accueil) ---
(function(){
  window.refreshActivePage = function(){
    try{
      function vis(id){ var el=document.getElementById(id); return el && !/hidden/.test(el.className); }
      if(vis('page-acc'))   return renderAccueil();
      if(vis('page-prac'))  return renderPracPage();
      if(vis('page-cal'))   return renderCalendar();
      if(vis('page-absrep'))return renderAbsRep();
      if(vis('page-week'))  return renderWeekType();
      if(vis('page-abs'))   { try{renderAbs();renderAbsIntern();}catch(e){} return; }
      if(vis('page-guard')) { try{renderGuards();renderGuardsIntern();}catch(e){} return; }
      if(vis('page-oncall'))return renderOncalls();
      if(vis('page-data'))  return renderDataPage();
      if(vis('page-stats')) { try{renderStats();renderStatsIntern();initStatsAdvanced();}catch(e){} return; }
    }catch(e){
      try{ renderAccueil(); }catch(_){}
    }
  };
})();
</script>


<script>
(function(){
  try{
    var ov = document.getElementById('authOverlay');
    var form = document.getElementById('authCard');
    var idEl = document.getElementById('authId');
    var codeEl = document.getElementById('authCode');
    var err = document.getElementById('authErr');
    if(!ov || !form) return;
    var OK = (sessionStorage.getItem('neptuneAuth') === 'ok');
    if(OK){ ov.style.display='none'; try{var _rb=document.getElementById('roleBadge'); if(_rb){ var _r=sessionStorage.getItem('neptuneRole')||'admin'; _rb.textContent='Rôle: '+(_r==='admin'?'Administrateur':(_r==='senior'?'Sénior':'Interne')); }}catch(e){} }
    else { ov.style.display='flex'; }
    form.addEventListener('submit', function(e){
      e.preventDefault();
      e.stopImmediatePropagation();
      var id = (idEl && idEl.value || '').trim();
      var code = (codeEl && codeEl.value || '').trim();
      var low = id.normalize('NFD').replace(/\p{Diacritic}/gu,'').toLowerCase();
      var role = null;
      if(low === 'admin' && code === 'radiocb29!'){ role = 'admin'; }
      else if((low === 'senior' || low === 'senior.' || low === 'senior ') && code === 'radiocb29'){ role = 'senior'; }
      else if(low === 'interne' && code === 'radiocb'){ role = 'interne'; }
      if(role){
        sessionStorage.setItem('neptuneAuth','ok');
        sessionStorage.setItem('neptuneRole', role);
        sessionStorage.setItem('neptuneUser', id);
        ov.style.display='none';
        try{ var rb=document.getElementById('roleBadge'); if(rb) rb.textContent='Rôle: '+(role==='admin'?'Administrateur':(role==='senior'?'Sénior':'Interne')); }catch(e){}
      }else{
        if(err) err.textContent = 'Identifiants incorrects.';
      }
      return false;
    }, true);
  }catch(e){ /* noop */ }
})();
</script>

<script>
(function(){
  window.getRole = function(){
    try{ return sessionStorage.getItem('neptuneRole') || (sessionStorage.getItem('neptuneAuth')==='ok' ? 'admin' : 'interne'); }
    catch(e){ return 'interne'; }
  };
  window.can = function(action){
    var r = getRole();
    if(r === 'admin') return true;
    if(r === 'senior'){
      return ['editAbsences','editGuards','editOncall','chooseReplacement','filters','navigate'].indexOf(action) >= 0;
    }
    return ['filters','navigate'].indexOf(action) >= 0; // interne
  };
  window.applyRoleLocks = function(){
    try{
      var r = getRole();
      var active = document.querySelector('section:not(.hidden)');
      if(!active) return;
      if(r==='admin') return;
      var pageId = active.id || '';
      var allowSenior = (r==='senior');
      
      // Always allow navigation on the per-person planning pages
      if(pageId==='page-prac' || pageId==='page-intern'){
        // Keep replacement UI blocked by can('chooseReplacement'); other edits are not present here.
        return;
      }
var nodes = active.querySelectorAll('input, select, textarea, button');
      for(var i=0;i<nodes.length;i++){
        var el = nodes[i];
        var id = el.id || '';
        var inTabs = !!(el.closest && el.closest('#tabs'));
        var isFilter = /^acc|^cal|^month|^year|^week|^accMode|^calMode|^accPrev|^accNext|^accYear|^accWeek|^accMonth|^calYear|^calMonth/.test(id);
        if(inTabs || isFilter){ continue; }
        if(allowSenior){
          if(pageId==='page-abs' || pageId==='page-absrep' || pageId==='page-guard' || pageId==='page-oncall'){ continue; }
          if((active.querySelector('.rep-choice') || active.querySelector('.rep-ui')) && (el.classList && (el.classList.contains('rep-choice') || (el.closest && el.closest('.rep-ui'))))){ continue; }
        }
        el.disabled = true;
        if(!el.title) el.title = 'Lecture seule';
      }
    }catch(e){}
  };
  try{
    var rb=document.getElementById('roleBadge');
    if(rb){
      var role=getRole();
      rb.textContent='Rôle: '+(role==='admin'?'Administrateur':(role==='senior'?'Sénior':(role==='interne'?'Interne':role)));
    }
  }catch(e){}
})();
</script>


















<!-- === Neptune: panneau de sauvegarde centrale (JsonStorage URI longue, éditable) === -->
<style>
  .nc-wrap{position:fixed;right:12px;bottom:12px;z-index:99999}
  .nc-bar{display:flex;gap:8px;align-items:center;background:#fff;border:1px solid #e5e7eb;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.08);padding:8px 10px}
  .nc-btn{padding:6px 10px;border-radius:8px;border:1px solid #ddd;background:#f7f7f7;cursor:pointer;font:13px system-ui}
  .nc-btn.primary{background:#1a7f37;border-color:#1a7f37;color:#fff}
  .nc-status{color:#333;margin-left:6px;font:13px system-ui}
  .nc-drawer{position:absolute;right:0;bottom:56px;width:360px;max-width:92vw;background:#fff;border:1px solid #e5e7eb;border-radius:12px;box-shadow:0 2px 14px rgba(0,0,0,.12);padding:12px;display:none}
  .nc-row{display:flex;gap:6px;align-items:center;margin:6px 0}
  .nc-row input{flex:1;padding:8px;border:1px solid #e5e7eb;border-radius:8px;font:13px system-ui}
  .nc-row label{font:12px system-ui;color:#555;min-width:90px}
  .nc-help{font:12px system-ui;color:#667085}
  .nc-link{font:12px system-ui;color:#2563eb;cursor:pointer;text-decoration:underline}
</style>
<div class="nc-wrap">
  <div class="nc-bar">
    <button class="nc-btn" id="nc-load">← Charger</button>
    <button class="nc-btn primary" id="nc-save">Enregistrer →</button>
    <button class="nc-btn" id="nc-opt">⚙️</button>
    <button class="nc-btn" id="nc-restore">↩︎ Restaurer</button>
    <span id="nc-status" class="nc-status">—</span>
  </div>

  <div class="nc-drawer" id="nc-drawer">
    <div class="nc-row"><label>URI longue</label><input id="nc-uri" placeholder="https://api.jsonstorage.net/v1/json/USER/ITEM"></div>
    <div class="nc-row"><label>Clé API</label><input id="nc-key" placeholder="clé avec Read+Modify"></div>
    <div class="nc-row">
      <button class="nc-btn" id="nc-savecfg">Enregistrer options</button>
      <span class="nc-help">Conservé dans ce navigateur (localStorage).</span>
    </div>
    <div class="nc-row nc-help">Astuce : l’URI longue est celle renvoyée par le POST de JsonStorage (…/v1/json/<b>USER</b>/<b>ITEM</b>)</div>
    <div class="nc-row"><span class="nc-link" id="nc-fill-defaults">Remplir avec les valeurs par défaut</span></div>
  </div>
</div>


<!-- === /Neptune: panneau de sauvegarde === -->



<!-- === BEGIN: Floating Sync Panel (corrected) === -->
<style>
#syncPanel{position:fixed;right:14px;bottom:14px;z-index:9999;max-width:360px}
#syncPanel .card{background:linear-gradient(180deg, #102a5c 0%, #163a7e 100%);border:1px solid #2a4ea8;border-radius:12px;padding:10px;color:#e7f0ff;box-shadow:0 6px 22px rgba(0,0,0,.35)}
#syncPanel .row{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin:6px 0}
#syncPanel button,#syncPanel input[type=file]{background:#0f2558;border:1px solid #2b4fb0;color:#e7edff;padding:6px 10px;border-radius:10px;cursor:pointer}
#syncPanel small{color:#bcd1ff}
#syncPanel .pill{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid #2a4ea8;background:#101c44;color:#cfe0ff;font-size:12px}
#syncPanel h3{margin:0 0 6px 0;font-size:13px}
</style>
<div id="syncPanel">
  <div class="card">
    <h3>Sauvegarde centralisée</h3>
    <div class="row">
      <button id="btnSimplePull" title="Recharger depuis JsonStorage">← Recharger</button>
      <button id="btnSimplePush" title="Pousser vers JsonStorage">Pousser →</button>
      <span id="simpleSaveStatus" class="pill">Prêt</span>
    </div>
    <div class="row">
      <button id="btnPickHtml" title="Sélectionner un fichier HTML pour activer l'autosauvegarde locale">Sélectionner HTML…</button>
      <button id="btnSaveHtmlNow" title="Écrire la page courante dans le fichier sélectionné">Enregistrer maintenant</button>
    </div>
    <div class="row">
      <button id="btnExport">Exporter JSON</button>
      <input id="fileImport" type="file" accept="application/json">
      <button id="btnImport">Importer</button>
      <button id="btnReset" title="Réinitialiser l'état local (ne touche pas JsonStorage)">Réinitialiser</button>
    </div>
    <div class="row"><small id="saveHint">Astuce : utilisez Chrome/Edge récents pour l'écriture directe dans un fichier.</small></div>
  </div>
</div>
<!-- === END: Floating Sync Panel (corrected) === -->

<!-- État embarqué dans le fichier (sera mis à jour) -->
<script type="application/json" id="NEPTUNE_EMBED">{"title":"", "body":"", "__meta":{"updatedAt":"", "by":""}}</script>

<!-- ========== FRAGMENT A : Persistance dans le fichier (corrigé) ========== -->
<script>
/* === Persistance dans le fichier HTML (embed JSON + File System Access) === */

var __neptuneHandle = null;
window.__neptuneAutosave = false;

// Charger l'état depuis l'HTML embarqué
function loadFromEmbed(){
  try{
    var el = document.getElementById('NEPTUNE_EMBED');
    if(el && el.textContent && el.textContent.trim()){
      return JSON.parse(el.textContent);
    }
  }catch(e){}
  return null;
}

// Écrire l'état dans l'HTML (balise <script type="application/json" id="NEPTUNE_EMBED">)
function writeEmbed(obj){
  try{
    var el = document.getElementById('NEPTUNE_EMBED');
    if(!el){
      el = document.createElement('script');
      el.type = 'application/json';
      el.id = 'NEPTUNE_EMBED';
      document.body.appendChild(el);
    }
    el.textContent = JSON.stringify(obj);
  }catch(e){}
}

// Écriture disque de la page HTML courante
async function saveHtmlToDisk(){
  try{
    writeEmbed(window.data);
    let handle = __neptuneHandle;
    if(!handle){
      if(!window.showSaveFilePicker){
        alert("Votre navigateur ne permet pas l'écriture directe. Utilisez Exporter JSON.");
        return;
      }
      handle = await window.showSaveFilePicker({
        suggestedName: (document.title || 'neptune') + '.html',
        types: [{ description: 'HTML', accept: { 'text/html': ['.html', '.htm'] } }]
      });
      __neptuneHandle = handle;
      window.__neptuneAutosave = true;
    }
    const writable = await handle.createWritable();
    const htmlText = '<!doctype html>\n' + document.documentElement.outerHTML;
    await writable.write(htmlText);
    await writable.close();
    var hint = document.getElementById('saveHint');
    if(hint) hint.textContent = 'Enregistré dans le fichier.';
  }catch(err){
    console.error(err);
    alert('Échec de la sauvegarde dans le fichier: ' + (err && err.message ? err.message : err));
  }
}

// Sélectionner un fichier HTML pour activer l'autosauvegarde
async function pickHtmlFile(){
  try{
    if(!window.showOpenFilePicker){
      alert("Votre navigateur ne permet pas la sélection d'un fichier pour écriture.");
      return;
    }
    const [handle] = await window.showOpenFilePicker({
      types: [{ description: 'HTML', accept: { 'text/html': ['.html', '.htm'] } }]
    });
    __neptuneHandle = handle;
    window.__neptuneAutosave = true;
    var hint = document.getElementById('saveHint');
    if(hint) hint.textContent = "Autosauvegarde activée sur ce fichier.";
    await saveHtmlToDisk();
  }catch(err){
    if(err && err.name === 'AbortError') return;
    console.error(err);
    alert("Impossible d'activer l'autosauvegarde: " + (err && err.message ? err.message : err));
  }
}

// Câblage des boutons du panneau "Sauvegarde"
function enhanceSavePageUI(){
  try{
    var pickBtn = document.getElementById('btnPickHtml');
    var saveNowBtn = document.getElementById('btnSaveHtmlNow');
    if(pickBtn){ pickBtn.onclick = pickHtmlFile; }
    if(saveNowBtn){ saveNowBtn.onclick = saveHtmlToDisk; }
    var hint = document.getElementById('saveHint');
    if(hint){
      if(!('showOpenFilePicker' in window)){
        hint.textContent = "Astuce: pour un stockage multi-PC sans serveur, utilisez Chrome/Edge récents. Sinon, Exporter/Importer JSON.";
      }else{
        hint.textContent = window.__neptuneAutosave ? "Autosauvegarde active." : "Sélectionnez le fichier HTML pour activer l'autosauvegarde.";
      }
    }
  }catch(e){}
}
document.addEventListener('DOMContentLoaded', enhanceSavePageUI);

// Exporter / Importer / Reset (boutons)
function buildSave(){
  function $(id){ return document.getElementById(id); }
  var KEY='neptune-v5';

  $('btnExport').onclick=function(){
    var blob=new Blob([JSON.stringify(window.data||{},null,2)],{type:'application/json'});
    var a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='Neptune_backup.json'; a.click(); URL.revokeObjectURL(a.href);
  };

  $('btnImport').onclick=async function(){
    var f=$('fileImport').files[0]; if(!f) return;
    var r=new FileReader();
    r.onload=async function(){
      try{
        var j=JSON.parse(String(r.result||'{}'));
        window.data=j;
        if(typeof window.save==='function') window.save();
        if(window.__neptuneAutosave && typeof saveHtmlToDisk==='function'){
          try{ await saveHtmlToDisk(); }catch(_){}
          alert('Import OK — enregistré dans le fichier.');
        }else if('showOpenFilePicker' in window){
          if(confirm('Import OK. Voulez-vous l\'enregistrer dans ce fichier HTML ?')){
            try{ await pickHtmlFile(); }catch(_){}
          } else {
            alert('Import OK (non enregistré dans le fichier).');
          }
        }else{
          alert('Import OK (pas d\'accès disque ; données conservées en mémoire).');
        }
        location.reload();
      }catch(e){ alert('Import invalide'); }
    };
    r.readAsText(f);
  };

  $('btnReset').onclick=function(){
    if(!confirm('Tout réinitialiser ?')) return;
    try{ localStorage.removeItem(KEY); }catch(e){}
    location.reload();
  };
}
</script>

<!-- ========== FRAGMENT B : Sync JsonStorage (corrigé, un seul bloc) ========== -->
<script>
(function(){
  "use strict";

  // ✅ Identifiants (conservés)
  const FIXED_URI = "https://api.jsonstorage.net/v1/json/88ff1334-435e-4e42-bcf4-65ee4777fa1f/1979d83c-f4b7-4e34-a4d8-bda3f1be9fd9";
  const API_KEY   = "1c5f1698-c8f7-4992-988a-d1ae29cb35ee";

  function status(msg){
    const el = document.getElementById('simpleSaveStatus');
    if(el) el.textContent = msg + " (" + new Date().toLocaleTimeString() + ")";
  }
  function deviceId(){
    try{
      let id=localStorage.getItem('neptune-device');
      if(!id){ id=Math.random().toString(36).slice(2)+'-'+Date.now().toString(36); localStorage.setItem('neptune-device',id); }
      return id;
    }catch(e){ return 'device'; }
  }
  function stamp(){
    try{
      if(!window.data) window.data={};
      if(!window.data.__meta) window.data.__meta={};
      window.data.__meta.updatedAt=new Date().toISOString();
      window.data.__meta.by=deviceId();
    }catch(e){}
  }

  async function jsGet(){
    let r = await fetch(FIXED_URI,{method:'GET',cache:'no-cache'});
    if(r.status===401||r.status===403){
      r = await fetch(FIXED_URI+(FIXED_URI.includes('?')?'&':'?')+'apiKey='+encodeURIComponent(API_KEY),{method:'GET',cache:'no-cache'});
    }
    if(!r.ok) throw new Error('GET '+r.status);
    return r.json();
  }

  async function jsPut(obj){
    const u = FIXED_URI+(FIXED_URI.includes('?')?'&':'?')+'apiKey='+encodeURIComponent(API_KEY);
    const r = await fetch(u,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(obj,null,2)});
    if(!r.ok) throw new Error('PUT '+r.status);
    return r.json();
  }

  async function simplePull(){
    try{
      const remote = await jsGet();
      const ru = remote && remote.__meta && Date.parse(remote.__meta.updatedAt||'') || 0;
      const lu = window.data && window.data.__meta && Date.parse(window.data.__meta.updatedAt||'') || 0;
      if(ru>lu || !lu){
        window.data = remote;
        if(typeof window.save==='function') window.save();
        try{ if(window.refreshActivePage) window.refreshActivePage(); }catch(_){}
        status('Mise à jour tirée');
      }else{
        status('Déjà à jour');
      }
    }catch(e){
      console.warn(e);
      status('Échec lecture');
    }
  }

  async function simplePush(){
    try{
      if(typeof window.beforePush==='function') window.beforePush();
      stamp();
      await jsPut(window.data || {});
      status('Données poussées');
    }catch(e){
      console.warn(e);
      status('Échec écriture');
    }
  }

  // Câblage des boutons du panneau JsonStorage
  function bind(){
    const pull = document.getElementById('btnSimplePull');
    const push = document.getElementById('btnSimplePush');
    if(pull && !pull.__bound){ pull.__bound=true; pull.addEventListener('click', simplePull); }
    if(push && !push.__bound){ push.__bound=true; push.addEventListener('click', simplePush); }
  }

  // Autosync: pull initial + toutes les 5 min
  let t=null;
  function startTimer(){
    if(t) clearInterval(t);
    const tick=()=>simplePull().catch(()=>{});
    tick();
    t=setInterval(tick,5*60*1000);
  }

  // Autosauvegarde distante "debouncée" (appelée par save())
  let __pushTimer = null;
  window.__remoteSave = function(){
    try{ if(__pushTimer) clearTimeout(__pushTimer); }catch(_){}
    __pushTimer = setTimeout(async ()=>{
      try{
        stamp();
        await jsPut(window.data||{});
        status('Autosauvegarde distante OK');
      }catch(e){
        console.warn(e);
        status('Autosauvegarde distante: échec');
      }
    }, 700);
  };

  // Expose helpers
  window.remoteSync = { pull: simplePull, push: simplePush };

  // Patch save() si présent pour déclencher l'autosauvegarde distante après un rendu
  (function patchSave(){
    const old = window.save;
    window.save = function(){
      try{ if(typeof old === 'function') old.apply(this, arguments); }catch(_){}
      try{ if(typeof window.__remoteSave === 'function') window.__remoteSave(); }catch(_){}
    };
  })();

  // Boot
  document.addEventListener('DOMContentLoaded', function(){ bind(); startTimer(); if(typeof buildSave==='function') buildSave(); });
})();
</script>

</body></html>

